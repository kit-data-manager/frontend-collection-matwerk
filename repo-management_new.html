<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>BaseRepo UI</title>

    <!--script src="https://cdn.tailwindcss.com"></script-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/js/all.min.js"></script>
    <!--link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@kit-data-manager/metadata-editor@0.9.3/deps/opt/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@kit-data-manager/metadata-editor@0.9.3/deps/opt/fontawesome/css/all.min.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@kit-data-manager/metadata-editor@0.9.3/deps/opt/tabulator/tabulator_bootstrap4.min.css"-->
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@json-editor/json-editor@latest/dist/jsoneditor.min.js"></script>
    <script src="https://unpkg.com/@trevoreyre/autocomplete-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cleave.js@1.6.0/dist/cleave.min.js"></script>
    <!--Settings, models and ui schemas-->
    <style>
        .autocomplete-result-list{
            margin: 0;
            border: 1px solid rgba(0,0,0,.12);
            padding: 0;
            box-sizing: border-box;
            max-height: 296px;
            overflow-y: auto;
            background: #fff;
            list-style: none;
            box-shadow: 0 2px 2px rgba(0,0,0,.16);
        }

        html {
            font-size: 12px!important;
        }
    </style>
    <script src="./definitions/base-repo/models/resourceModel.js"></script>
    <script src="./definitions/base-repo/models/contentModel.js"></script>
    <!--script src="./definitions/base-repo/users.js"></script-->

</head>

<body>
    <div>
        <div id="editor">

        </div>

        <div id="editorContent">

        </div>
        <!--div class="four wide column" style="background-color: lightgray;margin: 2px">
            <div class="ui card">
                <div class="content">
                    <div class="ui left floated meta placeholder" style="margin-right: 4px">
                        <div class="image header" style="height:42px">
                        </div>
                    </div>
                    <div >
                    <span class="ui warning text" >d99746af-8013-4e62-b49a-582e9133f95e</span>
                    </div>
                </div>
                <div class="image">
                    <div class="ui segment">
                        This is <span class="ui info text">info</span> inline text and this is <span class="ui success text">success</span> inline text and this is <span class="ui warning text">warning</span> inline text and this is <span class="ui error text">error</span> inline text
                    </div>
                </div>
                <div class="content">
                    <span class="right floated">
                    <i class="heart outline like icon"></i>
                    2023
                    </span>
                    <i class="comment icon"></i>
                    Thomas Jejkal
                </div>
                <div class="extra content">
                    <div class="ui large transparent left icon input">
                        <i class="heart outline icon"></i>
                        <input type="text" placeholder="Add Comment...">
                    </div>
                </div>
            </div-->

        </div>
    </div>

<!-- JS -->
<script>
    //JSONEditor.defaults.languages.en.button_edit_json = "JSON editieren";
    Handlebars.registerHelper('test', function (value) {
        return value;
    });
    const element = document.getElementById('editor');
    JSONEditor.defaults.options.theme = 'bootstrap5';
    JSONEditor.defaults.options.template = 'handlebars';
    JSONEditor.defaults.options.ajax = true;
    JSONEditor.defaults.options.iconlib = "fontawesome5";


    // Global callback list
    window.JSONEditor.defaults.callbacks = {
        "autocomplete": {
            // This is callback functions for the "autocomplete" editor
            // In the schema you refer to the callback function by key
            // Note: 1st parameter in callback is ALWAYS a reference to the current editor.
            // So you need to add a variable to the callback to hold this (like the
            // "jseditor_editor" variable in the examples below.)

            // Lookup using data from form
            "search_keycloak": function search(jseditor_editor, input) {
                var data = users;
                if (input.length < 1) {
                    return [];
                }
                return data.filter(function(item) {
                    return item.lastName.toLowerCase().startsWith(input.toLowerCase());
                });
            },
            "getResultValue_keycloak": function getResultValue(jseditor_editor, result) {
                return result.email;
            },

            "renderResult_keycloak": function(jseditor_editor, result, props) {
                return ['<li ' + props + '>',
                    '<div class="autocomplete-result-list">',
                     result.lastName + ', ' + result.firstName + '</div>',
                    '</li>'].join('');
            }
        }
    };

    //JSONEditor.defaults.language = "es";
    const editor = new JSONEditor(element,{
        schema: model,
        display_required_only: false,
        compact:true,
        no_additional_properties: true
    });


    const elementContent = document.getElementById('editorContent');
    //JSONEditor.defaults.language = "es";
    const editorContent = new JSONEditor(elementContent,{
        schema: contentModel,
        display_required_only: false,
        compact:true,
        no_additional_properties: true
    });
    editorContent.getEditor('root.parentResource').disable();



</script>
</body>
</html>
